{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": [
    "config:recommended",
    ":semanticCommitsDisabled",
    "schedule:daily"
  ],
  "enabledManagers": [
    "custom.regex"
  ],
  "automerge": true,
  "customManagers": [
    {
      "customType": "regex",
      "managerFilePatterns": [
        "/prep-pct.sh/"
      ],
      "matchStrings": [
        "pct_version=(?<currentValue>.*?)\\n"
      ],
      "depNameTemplate": "org.jenkins-ci.tests:plugins-compat-tester-cli",
      "datasourceTemplate": "maven",
      "registryUrlTemplate": "https://repo.jenkins-ci.org/releases/"
    },
    {
      "customType": "regex",
      "managerFilePatterns": [
        "/sample-plugin/pom.xml/"
      ],
      "matchStrings": [
        "\\n\\s{4}<jenkins\\.version>(?<currentValue>.*?)<\\/jenkins\\.version>\\n"
      ],
      "depNameTemplate": "org.jenkins-ci.main:jenkins-war",
      "datasourceTemplate": "maven",
      "registryUrlTemplate": "https://repo.jenkins-ci.org/releases/"
    }
  ],
  "packageRules": [
    {
      "matchManagers": "maven",
      "matchFileNames": [
        "sample-plugin/**"
      ],
      "automerge": true,
      "prConcurrentLimit": 10,
    },
    {
      "matchManagers": "maven",
      "matchFileNames": [
        "bom-weekly/**"
      ],
      "automerge": true,
      "prConcurrentLimit": 25,
      // dependency updates to plugin BOM are developer relevant changes
      // developer label assures CD process will release with this change
      // https://github.com/jenkinsci/bom/issues/4092#issuecomment-2544153741
      "labels": [
        "developer"
      ],
    },
    {
      "matchDepNames": [
        "com.sonyericsson.jenkins.plugins.bfa:build-failure-analyzer"
      ],
      "allowedVersions": "!/2.27.0$/" // should have been 1.27.0
    },
    {
      "matchDepNames": [
        "org.jenkins-ci.tests:plugins-compat-tester-cli"
      ],
      "labels": [
        "dependencies",
        "full-test"
      ]
    },
    {
      "matchDepNames": [
        "org.jenkins-ci.main:jenkins-test-harness",
        "org.jenkins-ci.main:jenkins-war"
      ],
      "labels": [
        "dependencies",
        "weekly-test"
      ]
    }
  ],
  "rebaseWhen": "conflicted"
}
